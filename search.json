[
  {
    "objectID": "stac-sdm-example.html",
    "href": "stac-sdm-example.html",
    "title": "Using Paituli STAC and elapid library for species distribution modelling",
    "section": "",
    "text": "Code\nimport os\nfrom pathlib import Path\nimport geopandas as gpd\nimport pandas as pd\nimport numpy as np\nimport rasterio as rio\nimport warnings\nfrom tqdm import tqdm\nwarnings.filterwarnings('ignore')\n\n\nExample workflow on how to get data from Paituli STAC and use it for species distribution modelling.\n\nAcquiring data from Paituli STAC\n\n\nCode\nimport stackstac\nfrom dask.distributed import Client, Lock\nimport pystac_client\nimport pyproj\nimport geopandas as gpd\nimport json\nimport requests \nimport rioxarray\n\n\nPaituli STAC only works with pystac_client version 0.6.1 so ensure that we are using it.\n\n\nCode\npystac_client.__version__\n\n\n'0.6.1'\n\n\nFirst set url for Paituli STAC and create a bugfix exclusive for this\n\n\nCode\ndef change_to_https(request:requests.Request) -&gt; requests.Request:\n    request.url = request.url.replace('http:', 'https:')\n    return request\n\npaituli_stac_url = 'https://paituli.csc.fi/geoserver/ogc/stac/v1'\n\n\nNext step is to start a Dask cluster for faster processing\n\n\nCode\nclient = Client(n_workers=20)\n\n\nThen define the endpoint and see how many collections are in the catalog:\n\n\nCode\ncatalog = pystac_client.Client.open(paituli_stac_url, request_modifier=change_to_https)\ncatalog\n\n\n\n\n\n\n    \n        \n            \n                \n                    \n        \n            type\n            \"Catalog\"\n        \n    \n                \n            \n                \n                    \n        \n            id\n            \"GeoserverSTACLandingPage\"\n        \n    \n                \n            \n                \n                    \n        \n            stac_version\n            \"1.0.0\"\n        \n    \n                \n            \n                \n                    \n        \n            description\n            \"Paituli STAC with Finnish data. More info: https://paituli.csc.fi/stac.html\"\n        \n    \n                \n            \n                \n                    \n        \n            links\n            [] 144 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \n        \n            \n                \n        \n            rel\n            \"root\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Paituli STAC\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \n        \n            \n                \n        \n            rel\n            \"self\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \n        \n            \n                \n        \n            rel\n            \"alternate\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/?f=application%2Fx-yaml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/x-yaml\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"This document as application/x-yaml\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \n        \n            \n                \n        \n            rel\n            \"alternate\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"This document as text/html\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            \n        \n            \n                \n        \n            rel\n            \"service-desc\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/openapi?f=application%2Fvnd.oai.openapi%2Bjson%3Bversion%3D3.0\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/vnd.oai.openapi+json;version=3.0\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"API definition for this endpoint as application/vnd.oai.openapi+json;version=3.0\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            5\n            \n        \n            \n                \n        \n            rel\n            \"service-desc\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/openapi?f=application%2Fx-yaml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/x-yaml\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"API definition for this endpoint as application/x-yaml\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            6\n            \n        \n            \n                \n        \n            rel\n            \"service-doc\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/openapi?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"API definition for this endpoint as text/html\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            7\n            \n        \n            \n                \n        \n            rel\n            \"conformance\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/conformance?f=application%2Fx-yaml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/x-yaml\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Conformance declaration as application/x-yaml\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            8\n            \n        \n            \n                \n        \n            rel\n            \"conformance\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/conformance?f=application%2Fjson\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Conformance declaration as application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            9\n            \n        \n            \n                \n        \n            rel\n            \"conformance\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/conformance?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Conformance declaration as text/html\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            10\n            \n        \n            \n                \n        \n            rel\n            \"data\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections?f=application%2Fjson\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Collections Metadata as application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            11\n            \n        \n            \n                \n        \n            rel\n            \"data\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Collections Metadata as text/html\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            12\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_global_radiation_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            13\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_land_class_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            14\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_2_3_nppcarbon_gram_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            15\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/regions_land_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            16\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_8_modif_area_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            17\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_sea_level_pressure_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            18\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_1_11_days_mosaics_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            19\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_dtw_2m_10ha_threshold_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            20\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_precipitation_predictions_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            21\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_1_mining_area_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            22\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_general_map_1milj_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            23\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_6_footprint_perc_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            24\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_forest_snow_damage_risk_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            25\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_5_road_density_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            26\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/daily_wind_damage_risk_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            27\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/regional_state_administrative_agencies_land_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            28\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_2_nir_b08_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            29\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_2_1_forest_loss_perc_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            30\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_volume_spruce_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            31\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/wind_velocity_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            32\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_13_livestock_mass_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            33\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_digital_elevation_model_2m_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            34\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_erosion_susceptibility_of_agricultural_areas_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            35\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/landsat_annual_index_mosaics_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            36\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            37\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sea_regions_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            38\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_2_satellite_image_mosaic_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            39\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_max_temperature_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            40\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/canopy_height_model_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            41\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_3_1_light_mcdm2_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            42\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_dtw_2m_0_5ha_threshold_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            43\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/2m_digital_terrain_model_products_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            44\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_monthly_precipitation_1km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            45\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel2-l2a\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            46\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_snow_load_on_trees_100m_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            47\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/vegetation_height_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            48\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_false_color_orthoimage_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            49\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_wind_speed_10y_return_level_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            50\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_stand_class_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            51\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/digital_surface_model_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            52\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_12_crop_perc_iiasa_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            53\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_dtw_2m_4ha_threshold_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            54\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_digital_elevation_model_25m_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            55\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_2_annual_mosaics_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            56\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_site_main_class_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            57\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/land_parcels_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            58\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_basic_map_background_colour_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            59\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_5_4_clim_velocity_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            60\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_monthly_mean_temperature_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            61\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/digital_terrain_model_10m_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            62\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_2_monthly_index_mosaics_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            63\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_2_2_forest_trend_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            64\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/digital_terrain_model_2m_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            65\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_orthoimage_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            66\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_orthoimage_newest_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            67\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/peatland_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            68\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_2_4_nppcarbon_perc_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            69\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_carbon_stock_change_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            70\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_7_impact_area_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            71\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_basic_map_print_colour_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            72\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/regional_state_administrative_agencies_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            73\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_1_daily_mosaics_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            74\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_potential_erosion_of_agricultural_lands_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            75\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/municipalities_land_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            76\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_min_temperature_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            77\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_1_tiles_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            78\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_min_temperature_predictions_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            79\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_2_swir_b11_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            80\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_relative_humidity_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            81\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_dtw_2m_2ha_threshold_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            82\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_topographic_map_100k_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            83\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_11_crop_perc_uni_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            84\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_5_1_temp_trends_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            85\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_site_fertility_class_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            86\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_volume_pine_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            87\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_forest_wind_damage_sensitivity_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            88\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_5_2_temp_signif_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            89\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_volume_of_growing_stock_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            90\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_volume_birch_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            91\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_5_3_clim_extreme_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            92\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_5_5_aridity_trend_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            93\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/digital_terrain_model_2m_slope_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            94\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_topographic_map_50k_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            95\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_volume_of_other_deciduous_tree_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            96\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_topographical_wetness_index_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            97\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_monthly_precipitation_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            98\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/building_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            99\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_dtw_2m_1ha_threshold_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            100\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_mean_temperature_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            101\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_basic_map_contours_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            102\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/superficial_deposits_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            103\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_inventory_basal_area_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            104\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_monthly_avg_temperature_1km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            105\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/country_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            106\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_erosion_susceptibility_of_land_areas_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            107\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/municipalities_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            108\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/luke_carbon_stock_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            109\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/canopy_cover_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            110\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nasa_usgs_latuviitta_landsat_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            111\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/ndvi_max_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            112\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_topographic_map_250k_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            113\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/regions_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            114\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_2_hazard_potential_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            115\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_digital_elevation_model_10m_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            116\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/orthophoto_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            117\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_mean_temperature_predictions_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            118\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_precipitation_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            119\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/digital_terrain_model_2m_aspect_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            120\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_3_human_density_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            121\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_monthly_precipitation_predictions_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            122\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_wind_speed_50y_return_level_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            123\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_false_color_orthoimage_newest_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            124\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/sentinel_2_11_days_mosaics_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            125\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_topographic_map_500k_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            126\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_10_fire_occur_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            127\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_snow_depth_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            128\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_4_built_area_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            129\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/corine_land_cover_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            130\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/fmi_daily_max_temperature_predictions_10km_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            131\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_1_9_human_biomes_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            132\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/nls_basic_map_without_contours_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            133\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/forest_wind_damage_risk_at_fmi\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            134\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/country_land_at_geocubes\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            135\n            \n        \n            \n                \n        \n            rel\n            \"child\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/collections/hy_spectre_3_2_fertilizer_kgha_at_paituli\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            136\n            \n        \n            \n                \n        \n            rel\n            \"search\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/search?f=application%2Fgeo%2Bjson\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/geo+json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Items as application/geo+json\"\n        \n    \n            \n        \n            \n                \n        \n            method\n            \"GET\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            137\n            \n        \n            \n                \n        \n            rel\n            \"search\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/search?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Items as text/html\"\n        \n    \n            \n        \n            \n                \n        \n            method\n            \"GET\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            138\n            \n        \n            \n                \n        \n            rel\n            \"search\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/search?f=application%2Fgeo%2Bjson\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/geo+json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Items as application/geo+json\"\n        \n    \n            \n        \n            \n                \n        \n            method\n            \"POST\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            139\n            \n        \n            \n                \n        \n            rel\n            \"search\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/search?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Items as text/html\"\n        \n    \n            \n        \n            \n                \n        \n            method\n            \"POST\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            140\n            \n        \n            \n                \n        \n            rel\n            \"http://www.opengis.net/def/rel/ogc/1.0/queryables\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/queryables?f=application%2Fschema%2Bjson\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/schema+json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Queryables as application/schema+json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            141\n            \n        \n            \n                \n        \n            rel\n            \"http://www.opengis.net/def/rel/ogc/1.0/queryables\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/queryables?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Queryables as text/html\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            142\n            \n        \n            \n                \n        \n            rel\n            \"http://www.opengis.net/def/rel/ogc/1.0/sortables\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/sortables?f=application%2Fschema%2Bjson\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"application/schema+json\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Sortables as application/schema+json\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            143\n            \n        \n            \n                \n        \n            rel\n            \"http://www.opengis.net/def/rel/ogc/1.0/sortables\"\n        \n    \n            \n        \n            \n                \n        \n            href\n            \"https://paituli.csc.fi/geoserver/ogc/stac/v1/sortables?f=text%2Fhtml\"\n        \n    \n            \n        \n            \n                \n        \n            type\n            \"text/html\"\n        \n    \n            \n        \n            \n                \n        \n            title\n            \"Sortables as text/html\"\n        \n    \n            \n        \n    \n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            conformsTo\n            [] 22 items\n        \n        \n            \n        \n            \n                \n        \n            0\n            \"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/core\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            1\n            \"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            2\n            \"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/html\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            3\n            \"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            4\n            \"https://api.stacspec.org/v1.0.0-beta.5/core\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            5\n            \"https://api.stacspec.org/spec/v1.0.0-beta.1/ogcapi-features\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            6\n            \"https://api.stacspec.org/v1.0.0-beta.5/item-search\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            7\n            \"https://api.stacspec.org/v1.0.0-beta.5/item-search#filter\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            8\n            \"https://api.stacspec.org/v1.0.0-beta.5/item-search#sort\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            9\n            \"https://api.stacspec.org/v1.0.0-beta.5/item-search#fields\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            10\n            \"http://www.opengis.net/spec/ogcapi-features-3/1.0/req/features-filter\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            11\n            \"http://www.opengis.net/spec/ogcapi-features-3/1.0/req/filter\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            12\n            \"http://geoserver.org/spec/ecql/1.0/req/gs-ecql\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            13\n            \"http://geoserver.org/spec/ecql/1.0/req/ecql-text\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            14\n            \"http://www.opengis.net/spec/cql2/1.0/req/basic-cql2\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            15\n            \"http://www.opengis.net/spec/cql2/1.0/req/advanced-comparison-operators\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            16\n            \"http://www.opengis.net/spec/cql2/1.0/req/arithmetic\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            17\n            \"http://www.opengis.net/spec/cql2/1.0/req/property-property\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            18\n            \"http://www.opengis.net/spec/cql2/1.0/req/basic-spatial-operators\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            19\n            \"http://www.opengis.net/spec/cql2/1.0/req/spatial-operators\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            20\n            \"http://www.opengis.net/spec/cql2/1.0/req/functions\"\n        \n    \n            \n        \n    \n        \n            \n        \n            \n                \n        \n            21\n            \"http://www.opengis.net/spec/cql2/1.0/req/cql2-text\"\n        \n    \n            \n        \n    \n        \n    \n                \n            \n                \n                    \n        \n            title\n            \"Paituli STAC\"\n        \n    \n                \n            \n        \n    \n\n\n\n\n\nCode\nprint(f'There are {len(list(catalog.get_collections()))} collections in Paituli STAC')\n\n\nThere are 124 collections in Paituli STAC\n\n\nAvailable collections can be browsed here. As this example is about modelling the distribution of Accipiter gentilis, select suitable layers for that. First chech what kind of canopy related layers there are:\n\n\nCode\nfor collection in catalog.get_collections(): \n    if 'canopy' in collection.id: print(collection.id)\n\n\ncanopy_height_model_at_fmi\ncanopy_cover_at_geocubes\n\n\nAs canopy_height_model_at_fmi only covers the southern part of Finland, we use the canopy_cover_at_geocubes.\n\n\nCode\ncanopy_layers = ['canopy_cover_at_geocubes']\n\n\nForest related layers might also be useful:\n\n\nCode\nfor collection in catalog.get_collections():\n    if 'forest' in collection.id: print(collection.id)\n\n\nforest_inventory_land_class_at_geocubes\nluke_forest_snow_damage_risk_at_paituli\nhy_spectre_2_1_forest_loss_perc_at_paituli\nforest_inventory_volume_spruce_at_geocubes\nforest_inventory_at_fmi\nforest_stand_class_at_geocubes\nforest_inventory_site_main_class_at_geocubes\nhy_spectre_2_2_forest_trend_at_paituli\nforest_inventory_site_fertility_class_at_geocubes\nforest_inventory_volume_pine_at_geocubes\nluke_forest_wind_damage_sensitivity_at_paituli\nforest_inventory_volume_of_growing_stock_at_geocubes\nforest_inventory_volume_birch_at_geocubes\nforest_inventory_volume_of_other_deciduous_tree_at_geocubes\nforest_inventory_basal_area_at_geocubes\nforest_wind_damage_risk_at_fmi\n\n\nMost of the above are based on Multi-Source National Forest Inventory by LUKE. We will use those that are present in geocubes as they already have suitable resolutions.\n\n\nCode\nforest_layers = ['forest_inventory_land_class_at_geocubes', 'forest_inventory_volume_spruce_at_geocubes', 'forest_stand_class_at_geocubes',\n                 'forest_inventory_site_main_class_at_geocubes', 'forest_inventory_site_fertility_class_at_geocubes', \n                 'forest_inventory_volume_pine_at_geocubes', 'forest_inventory_volume_of_growing_stock_at_geocubes',\n                 'forest_inventory_volume_birch_at_geocubes', 'forest_inventory_volume_of_other_deciduous_tree_at_geocubes',\n                 'forest_inventory_basal_area_at_geocubes']\n\n\nNext check which Sentinel-2 products we have:\n\n\nCode\nfor collection in catalog.get_collections():\n    if 'sentinel' in collection.id: print(collection.id)\n\n\nsentinel_1_11_days_mosaics_at_fmi\nsentinel_2_nir_b08_at_geocubes\nsentinel_2_satellite_image_mosaic_at_geocubes\nsentinel2-l2a\nsentinel_2_annual_mosaics_at_fmi\nsentinel_2_monthly_index_mosaics_at_fmi\nsentinel_1_daily_mosaics_at_fmi\nsentinel_1_tiles_at_fmi\nsentinel_2_swir_b11_at_geocubes\nsentinel_2_11_days_mosaics_at_fmi\n\n\nsentinel_2_monthly_index_mosaics_at_fmi contain monthly index mosaics for NDVI, NDBI, NDSI, NDTI and NDMI. We will use some of those.\n\n\nCode\nsentinel_layers = ['sentinel_2_monthly_index_mosaics_at_fmi']\n\n\nThere are other useful layers (temperature, precipitation, Corine) but the above should be enough for example purposes.\nAs all data is limited to Finland, get Finnish borders to intersect it with:\n\n\nCode\nfin_borders_4326 = gpd.read_file('../data/fin_borders.shp').to_crs('EPSG:4326').geometry.iloc[0]\n\n\nSearch all above collections from the catalog:\n\n\nCode\ngc_search = catalog.search(\n    intersects=fin_borders_4326,\n    collections=canopy_layers+forest_layers\n)\ngc_search.matched()\n\n\n1200\n\n\n\n\nCode\n# ItemCollection as GeoJson \ngc_stac_json = gc_search.item_collection_as_dict()\n\n# Add Item ID to properties to have access to it in GeoPandas\nfor a in gc_stac_json['features']:\n    a['properties']['title']=a['id']\n\n# GeoJson as GeoPandas dataframe\ngc_gdf = gpd.GeoDataFrame.from_features(gc_stac_json, \"epsg:4326\")\nprint('Found items: ' \"{}\".format(len(gc_gdf))) \n\n\nFound items: 1200\n\n\nThe large number of matched items is due to geocubes data being tiled.\nGo through the Geocubes collections, aggregate them to 100m resolution and save them. First process canopy cover percentage as it is only tiled and doesnt have temporal dimension:\n\n\nCode\nsearch = catalog.search(\n    intersects=fin_borders_4326,\n    collections=canopy_layers\n)\n\n# Stack into cube\ncube = stackstac.stack(\n    items=search.item_collection(),\n    epsg=3067,\n    resolution=100\n).squeeze()\n\n# Mosaic the data\n\nmos = stackstac.mosaic(cube)\nmos.sel(band='100m').rio.to_raster('../data/stac/canopy_cover_at_geocubes_100m.tif')\n\n\nNext go through the forest layers. There are data from 2009 and 2015 so save them separately:\n\n\nCode\nfor c in tqdm(forest_layers):\n    search = catalog.search(\n        intersects=fin_borders_4326,\n        collections=[c]\n    )\n\n    cube = stackstac.stack(\n        items=search.item_collection(),\n        epsg=3067,\n        resolution=100\n    ).squeeze()\n\n    for t in np.unique(cube.time):\n        year = str(t).split('-')[0]\n        if not os.path.exists(f'../data/stac/{c}_{year}_100m.tif'):\n            mos= stackstac.mosaic(\n                cube.sel(time=t)\n            )\n            mos.sel(band='100m').rio.to_raster(f'../data/stac/{c}_{year}_100m.tif')\n\n\n100%|| 10/10 [00:19&lt;00:00,  1.95s/it]\n\n\nFinal step is to process monthly Sentinel-2 index mosaics. Here we use NDVI only\n\n\nCode\nsearch = catalog.search(\n    intersects=fin_borders_4326,\n    collections=sentinel_layers\n)\n\ncube = stackstac.stack(\n    items=search.item_collection(),\n    epsg=3067,\n    resolution=100,\n    bounds_latlon=fin_borders_4326.bounds,\n    dtype=np.uint8,\n    fill_value=0\n).squeeze().sel(band='ndvi')\n\n\nResample the data to yearly maximum. Mean or median might be better but lets try maximum for example purposes.\n\n\nCode\nyearly = cube.resample(time='YS').max('time', keep_attrs=True)\nyearly\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.DataArray 'stackstac-290ae1af320d8064740e1b17da4625ee' (time: 8,\n                                                                y: 11963,\n                                                                x: 7081)&gt;\ndask.array&lt;stack, shape=(8, 11963, 7081), dtype=uint8, chunksize=(1, 1024, 1024), chunktype=numpy.ndarray&gt;\nCoordinates:\n    band            &lt;U4 'ndvi'\n  * x               (x) float64 5.18e+04 5.19e+04 ... 7.597e+05 7.598e+05\n  * y               (y) float64 7.796e+06 7.796e+06 ... 6.6e+06 6.6e+06\n    gsd             float64 10.0\n    proj:transform  object {0, 1, 7800000, 10, 50000, -10}\n    proj:epsg       int64 3067\n    title           &lt;U4 'ndvi'\n    epsg            int64 3067\n  * time            (time) datetime64[ns] 2016-01-01 2017-01-01 ... 2023-01-01\nAttributes:\n    spec:        RasterSpec(epsg=3067, bounds=(51800, 6599500, 759900, 779580...\n    crs:         epsg:3067\n    transform:   | 100.00, 0.00, 51800.00|\\n| 0.00,-100.00, 7795800.00|\\n| 0....\n    resolution:  100xarray.DataArray'stackstac-290ae1af320d8064740e1b17da4625ee'time: 8y: 11963x: 7081dask.array&lt;chunksize=(1, 1024, 1024), meta=np.ndarray&gt;\n\n\n\n\n\n\n\n\n\n\n\nArray\nChunk\n\n\n\n\nBytes\n646.29 MiB\n1.00 MiB\n\n\nShape\n(8, 11963, 7081)\n(1, 1024, 1024)\n\n\nDask graph\n672 chunks in 37 graph layers\n\n\nData type\nuint8 numpy.ndarray\n\n\n\n\n                                                                         7081 11963 8\n\n\n\n\nCoordinates: (9)band()&lt;U4'ndvi'array('ndvi', dtype='&lt;U4')x(x)float645.18e+04 5.19e+04 ... 7.598e+05array([ 51800.,  51900.,  52000., ..., 759600., 759700., 759800.])y(y)float647.796e+06 7.796e+06 ... 6.6e+06array([7795800., 7795700., 7795600., ..., 6599800., 6599700., 6599600.])gsd()float6410.0array(10.)proj:transform()object{0, 1, 7800000, 10, 50000, -10}array({0, 1, 7800000, 10, 50000, -10}, dtype=object)proj:epsg()int643067array(3067)title()&lt;U4'ndvi'array('ndvi', dtype='&lt;U4')epsg()int643067array(3067)time(time)datetime64[ns]2016-01-01 ... 2023-01-01array(['2016-01-01T00:00:00.000000000', '2017-01-01T00:00:00.000000000',\n       '2018-01-01T00:00:00.000000000', '2019-01-01T00:00:00.000000000',\n       '2020-01-01T00:00:00.000000000', '2021-01-01T00:00:00.000000000',\n       '2022-01-01T00:00:00.000000000', '2023-01-01T00:00:00.000000000'],\n      dtype='datetime64[ns]')Indexes: (3)xPandasIndexPandasIndex(Float64Index([ 51800.0,  51900.0,  52000.0,  52100.0,  52200.0,  52300.0,\n               52400.0,  52500.0,  52600.0,  52700.0,\n              ...\n              758900.0, 759000.0, 759100.0, 759200.0, 759300.0, 759400.0,\n              759500.0, 759600.0, 759700.0, 759800.0],\n             dtype='float64', name='x', length=7081))yPandasIndexPandasIndex(Float64Index([7795800.0, 7795700.0, 7795600.0, 7795500.0, 7795400.0, 7795300.0,\n              7795200.0, 7795100.0, 7795000.0, 7794900.0,\n              ...\n              6600500.0, 6600400.0, 6600300.0, 6600200.0, 6600100.0, 6600000.0,\n              6599900.0, 6599800.0, 6599700.0, 6599600.0],\n             dtype='float64', name='y', length=11963))timePandasIndexPandasIndex(DatetimeIndex(['2016-01-01', '2017-01-01', '2018-01-01', '2019-01-01',\n               '2020-01-01', '2021-01-01', '2022-01-01', '2023-01-01'],\n              dtype='datetime64[ns]', name='time', freq='AS-JAN'))Attributes: (4)spec :RasterSpec(epsg=3067, bounds=(51800, 6599500, 759900, 7795800), resolutions_xy=(100, 100))crs :epsg:3067transform :| 100.00, 0.00, 51800.00|\n| 0.00,-100.00, 7795800.00|\n| 0.00, 0.00, 1.00|resolution :100\n\n\n\n\nCode\nfor i, t in enumerate(np.unique(yearly.time)):\n    year = str(t).split('-')[0]\n    print(year)\n    if os.path.exists(f'../data/stac/ndvimax_{year}_100m.tif'): continue\n    tif = yearly.isel(time=i).rio.to_raster(\n        f'../data/stac/ndvimax_{year}_100m.tif',\n        lock=Lock(name=\"rio\", client=client),\n        tiled=True,\n    )\n\n\nNo more Dask needed, close the client.\n\n\nCode\nclient.close()\n\n\nNow we have the data, lets use them.\n\n\nUsing elapid for species distribution modelling\n\n\nCode\nimport elapid as ela\nfrom sklearn import metrics\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n\n\n\nFirst we need to tell where the data can be found\n\n\nCode\ndatapath = Path('../data/stac')\n\nlayers = [datapath/f for f in os.listdir(datapath)]\nlabels = [l.stem for l in layers]\n\nlayers\n\n\n[PosixPath('../data/stac/forest_inventory_basal_area_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_basal_area_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_land_class_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_land_class_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_site_fertility_class_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_site_fertility_class_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_site_main_class_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_site_main_class_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_birch_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_birch_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_of_growing_stock_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_of_growing_stock_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_of_other_deciduous_tree_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_of_other_deciduous_tree_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_pine_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_pine_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_spruce_at_geocubes_2009_100m.tif'),\n PosixPath('../data/stac/forest_inventory_volume_spruce_at_geocubes_2015_100m.tif'),\n PosixPath('../data/stac/forest_stand_class_at_geocubes_2022_100m.tif'),\n PosixPath('../data/stac/ndvimax_2016_100m.tif'),\n PosixPath('../data/stac/ndvimax_2017_100m.tif'),\n PosixPath('../data/stac/ndvimax_2018_100m.tif'),\n PosixPath('../data/stac/ndvimax_2019_100m.tif'),\n PosixPath('../data/stac/ndvimax_2020_100m.tif'),\n PosixPath('../data/stac/ndvimax_2021_100m.tif'),\n PosixPath('../data/stac/ndvimax_2022_100m.tif'),\n PosixPath('../data/stac/ndvimax_2023_100m.tif')]\n\n\nMask all areas outside of the Finnish borders from these data:\n\n\nCode\nimport rasterio.mask as rio_mask\n\nfin_borders_3067 = gpd.read_file('../data/fin_borders.shp')\n\nfor l in tqdm(layers):\n    with rio.open(l) as src:\n        out_im, out_tfm = rio_mask.mask(src, [fin_borders_3067.geometry.iloc[0]], crop=True)\n        out_meta = src.meta\n    out_meta.update({'driver': 'GTiff',\n                     'height': out_im.shape[1],\n                     'width': out_im.shape[2],\n                     'transform':out_tfm})\n    with rio.open(l, 'w', **out_meta) as dest:\n        dest.write(out_im)\n\n\n100%|| 28/28 [01:53&lt;00:00,  4.07s/it]\n\n\nSome of these layers are categorical\n\n\nCode\ncat_features = [\n    'forest_inventory_land_class_at_geocubes_2009_100m',\n    'forest_inventory_land_class_at_geocubes_2015_100m',\n    'forest_stand_class_at_geocubes_2022_100m',\n    'forest_inventory_site_main_class_at_geocubes_2009_100m',\n    'forest_inventory_site_main_class_at_geocubes_2015_100m'\n]\n\n\nThen read our species data and rename species\n\n\nCode\nbird_data = gpd.read_file('../data/birds.geojson')\nsp_dict = {'DENMIN': 'Dryobates minor',\n           'ACCGEN': 'Accipiter gentilis',\n           'BUTBUT': 'Buteo buteo',\n           'DENLEU': 'Dendrocopos leucotos',\n           'PERAPI': 'Pernis apivorus',\n           'PICTRI': 'Picoide tridactylus'}\nbird_data['species'] = bird_data.species.apply(lambda row: sp_dict[row])\nbird_data['species'].value_counts()\n\n\nAccipiter gentilis      4219\nButeo buteo             2070\nPernis apivorus          416\nPicoide tridactylus      204\nDendrocopos leucotos     182\nDryobates minor          123\nName: species, dtype: int64\n\n\nAs we have the most data for Accipiter gentilis, use that for example\n\n\nCode\naccip_data = bird_data[bird_data.species == 'Accipiter gentilis']\naccip_data.plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\nHere we run two tests: one without sampling bias for pseudoabsence and one with it.\nFirst without:\n\n\nCode\npseudoabsence = ela.sample_raster(layers[0], count=10000, nodata=0)\nfig, ax = plt.subplots(1,1)\nfin_borders_3067.plot(facecolor='none', ax=ax)\npseudoabsence.plot(markersize=0.5, ax=ax)\n\n\n\n\n\n\n\n\n\n\n\nCode\naccip_locs = accip_data.geometry\naccip_presence = ela.annotate(accip_locs, layers, labels=labels, drop_na=True)\nbackground = ela.annotate(pseudoabsence, layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\naccip_presence.dropna(inplace=True)\nbackground.dropna(inplace=True)\n\n\nAround 15k points annotated from 27 rasters in less than 1.5 minutes. Next make the models, use similar hyperparameters than Maxent software. Hinge features are excluded due to a slight bug: covariates with all zeros lead to divide-by-zero errors during hinge feature calculations.\n\n\nCode\naccip_presence.shape, background.shape\n\n\n((4071, 28), (6683, 28))\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                        )\n\ntrain = ela.stack_geodataframes(accip_presence, background, add_class_label=True)\n\nxtrain = train[labels]\nytrain = train['class']\n\nmaxent.fit(xtrain, ytrain, categorical=[i for i in range(len(labels)) if labels[i] in cat_features])\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product'])\n\n\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.823\n\n\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=labels)\n\n\n\n\n\n\n\n\n\n\n\nCode\noutput = 'accgen_example_nobias.tif'\n\nela.apply_model_to_rasters(maxent, layers, output, quiet=False)\n\n\n\n\n\nNow the same process with biased sampling\n\n\nCode\npseudoabsence_bias = ela.sample_bias_file('../data/Bias_Heini_vajaa_100km.tif', 10_000)\nfig, ax = plt.subplots(1,1)\nfin_borders_3067.plot(facecolor='none', ax=ax)\npseudoabsence_bias.plot(markersize=0.5, ax=ax)\n\n\n\n\n\n\n\n\n\n\n\nCode\nbackground_bias = ela.annotate(pseudoabsence_bias, layers, labels=labels, drop_na=True)\nbackground_bias.dropna(inplace=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                        )\n\ntrain = ela.stack_geodataframes(accip_presence, background_bias, add_class_label=True)\n\nxtrain = train[labels]\nytrain = train['class']\n\nmaxent.fit(xtrain, ytrain, categorical=[i for i in range(len(labels)) if labels[i] in cat_features])\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product'])\n\n\nEvaluate\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.758\n\n\n\n\nCode\noutput = 'accgen_example_bias.tif'\n\nela.apply_model_to_rasters(maxent, layers, output, quiet=False)\n\n\n\n\n\nAside from Maxent, it is also possible to use other Scikit-learn models. For example, their tutorial uses svm.OneClassSVM, but RandomForestClassifier or HistGradientBoostingClassifier can also be used thanks to consistent API. Use the latter because it handles NaN values.\n\n\nCode\nfrom sklearn.ensemble import HistGradientBoostingClassifier\n\n\n\n\nCode\ngbm = HistGradientBoostingClassifier(categorical_features=[i for i in range(len(labels)) if labels[i] in cat_features],\n                                     scoring='roc_auc')\ngbm.fit(xtrain, ytrain)\nprint(f'Validation ROC AUC is {gbm.validation_score_}')\n\n\nValidation ROC AUC is [0.5        0.75719035 0.76568223 0.77051474 0.77058393 0.7721553\n 0.77294253 0.77436322 0.77571934 0.77728149 0.7794233  0.77962933\n 0.7817696  0.78214322 0.7822324  0.78291353 0.7843865  0.78530903\n 0.78615468 0.78723866 0.78748928 0.78815503 0.78838105 0.78889306\n 0.78967413 0.78911139 0.78898685 0.78977715 0.78956804 0.78881464\n 0.78901452 0.78945734 0.78920825 0.78884539 0.7881412  0.78815042\n 0.78849637 0.78851175]\n\n\n\n\nCode\nela.apply_model_to_rasters(gbm, layers, 'accgen_gbm_bias.tif', predict_proba=True, count=2)",
    "crumbs": [
      "Using Paituli STAC and elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Examples on species-distribution-modelling with various EO data",
    "section": "",
    "text": "This repository contains some examples on how to use openly available EO data for species distribution modelling. Examples are so far using python but other languages (mostly R) might arrive later.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "birds.html",
    "href": "birds.html",
    "title": "Using elapid library for species distribution modelling",
    "section": "",
    "text": "Code\nimport rasterio as rio\nfrom pathlib import Path\nimport os\nimport rasterio.plot as rioplot\nimport numpy\nimport elapid as ela\nimport geopandas as gpd\nimport pandas as pd\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nfrom sklearn import metrics\nimport warnings\nfrom tqdm import tqdm\nwarnings.filterwarnings(\"ignore\")\nThese examples replicate Virkkala et al.(2021). Developing fine-grained nationwide predictions of valuable forests using biodiversity indicator bird species with elapid. .asc-files used in these examples can be found from here and here, and results can be found on Zenodo portal: https://zenodo.org/records/4779108.\nThe data of nesting sites of the bird species are not open access data due to its sensitivity, but can be requested for research purposes by sending a query to the head of the Zoology unit at the Finnish Museum of Natural History.",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#convert-ascii-files-to-geotiff",
    "href": "birds.html#convert-ascii-files-to-geotiff",
    "title": "Using elapid library for species distribution modelling",
    "section": "Convert ascii files to geotiff",
    "text": "Convert ascii files to geotiff\nOne major advantage of not using Maxent software directly is that data doesnt have to be .asc, but they can be GeoTiffs. They can even be in different coordinate systems.\nFirst get the locations of all input layers\n\n\nCode\nasc_datapath = Path('../data/ascii')\nfiles_96m_asc = [f for f in os.listdir(asc_datapath) if f.endswith('96m.asc')]\nfiles_500m_asc = [f for f in os.listdir(asc_datapath) if f.endswith('500m.asc')]\nfiles_1km_asc = [f for f in os.listdir(asc_datapath) if f.endswith('1km.asc')]\nother_files_asc = ['GDD5.asc', 'TJan.asc']\nbias_files_asc = ['Bias_Heini_vajaa_100km.asc']\n\nasc_files = files_96m_asc + files_500m_asc + files_1km_asc + other_files_asc + bias_files_asc\nasc_files = [asc_datapath/f for f in asc_files]\n\ncrs = 'EPSG:3067'\n\n\nAnd then convert them into GeoTiffs\n\n\nCode\nfor f in tqdm(asc_files):\n    with rio.open(f) as src:\n        prof = src.profile\n        data = src.read()\n    prof.update({'crs':crs, 'driver':'GTiff', 'compress':'LZW', 'predictor':2, 'BIGTIFF':'YES'})\n    with rio.open(datapath/f'{f.stem}.tif', 'w', **prof) as dest:\n        dest.write(data)\n\n\n100%|| 42/42 [12:22&lt;00:00, 17.69s/it]",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#read-geotiff-files",
    "href": "birds.html#read-geotiff-files",
    "title": "Using elapid library for species distribution modelling",
    "section": "Read GeoTiff files",
    "text": "Read GeoTiff files\nGet the locations of all of the layers here\n\n\nCode\nfiles_96m = [f for f in os.listdir(datapath) if f.endswith('96m.tif')]\nfiles_500m = [f for f in os.listdir(datapath) if f.endswith('500m.tif')]\nfiles_1km = [f for f in os.listdir(datapath) if f.endswith('1km.tif')]\nother_files = ['GDD5.tif', 'TJan.tif']\nbias_file = 'Bias_Heini_vajaa_100km.tif'\n\ninp_layer_names = files_96m + files_500m + files_1km + other_files\nlabels = [f.split('.')[0] for f in inp_layer_names]\ninp_layers = [datapath/l for l in inp_layer_names]\n\n\nNote which features are categorical instead of continous\n\n\nCode\ncat_features = [\n    'dominant_tree_species_96m',\n    #'site_type_96m', # Technically ordinal features\n    #'site_type_500m', # Technically ordinal features\n    #'site_type_1km', # Technically ordinal features\n]",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#dryobates-minor",
    "href": "birds.html#dryobates-minor",
    "title": "Using elapid library for species distribution modelling",
    "section": "Dryobates minor",
    "text": "Dryobates minor\n\n\nCode\nbird_data_gdf[bird_data_gdf.species == 'Dryobates minor'].plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\nSample 10,000 points for background from the bias file.\n\n\nCode\npseudoabsence_bias = ela.sample_bias_file(datapath/bias_file, 10_000)\npseudoabsence_bias.plot(markersize=0.5)\npseudoabsence_bias.describe()\n\n\ncount                      10000\nunique                      9999\ntop       POINT (614464 7369840)\nfreq                           2\ndtype: object\n\n\n\n\n\n\n\n\n\nAnnotate points.\n\n\nCode\ndenmin_locs = bird_data_gdf[bird_data_gdf.species == 'Dryobates minor'].geometry\ndenmin_presence = ela.annotate(denmin_locs, inp_layers, labels=labels, drop_na=True)\nbackground = ela.annotate(pseudoabsence_bias, inp_layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTook around two minutes to annotate around 15k points from 40 rasters.\nSpecify which layers were used for modelling this species by Virkkala et al.:\n\n\nCode\ndenmin_layers = [fin_to_eng_layers[l] for l in denmin_fin_layers]\ndenmin_layers\n\n\n['shore_forest_500m',\n 'shore_forests_96m',\n 'TJan',\n 'marshland_500m',\n 'dominant_tree_species_96m',\n 'forest_peatland_500m',\n 'urban_area_500m',\n 'water_area_500m',\n 'tree_age_96m',\n 'site_type_500m',\n 'deci_tree_volume_96m',\n 'tree_volume_96m']\n\n\nSpecify which index has the categorical data.\n\n\nCode\ndenmin_cat_idx = [4]\n\n\nAnd then model the distribution. Hyperparameters are similar to Maxent software.\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product', 'hinge'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                         n_hinge_features=10)\n\ntrain = ela.stack_geodataframes(denmin_presence, background, add_class_label=True)\n\nxtrain = train[denmin_layers]\nytrain = train['class']\ndenmin_pred_layers = [datapath/f'{l}.tif' for l in denmin_layers]\nmaxent.fit(xtrain, ytrain, categorical=denmin_cat_idx) \n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])\n\n\nCheck the training AUC score:\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.921\n\n\nCheck the permutation importance plot for the model.\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=denmin_layers)\n\n\n\n\n\n\n\n\n\nWrite the predictions to a file in order to compare them with references.\n\n\nCode\noutput = 'denmin_preds_nosplit_glmnet.tif'\n\nela.apply_model_to_rasters(maxent, denmin_pred_layers, output, quiet=False)\n\n\n\n\n\n\n\nCode\ncomp = '../maxent_results/DENMIN_Full_data.asc'\nres = 'denmin_preds_nosplit_glmnet.tif'\n\nwith rio.open(comp) as src:\n    comp_vals = src.read(1)\nwith rio.open(res) as src:\n    res_vals = src.read(1)\n\n\nAssert that the values are equal.\n\n\nCode\ncomp_vals.shape, res_vals.shape\n\n\n((12420, 6180), (12420, 6180))\n\n\nCompute pixel-wise R and MAE.\n\n\nCode\nmetrics.r2_score(comp_vals.flatten(), res_vals.flatten())\n\n\n0.999999999935762\n\n\n\n\nCode\nmetrics.mean_absolute_error(comp_vals.flatten(), res_vals.flatten())\n\n\n0.011880678",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#accipiter-gentilis",
    "href": "birds.html#accipiter-gentilis",
    "title": "Using elapid library for species distribution modelling",
    "section": "Accipiter gentilis",
    "text": "Accipiter gentilis\n\n\nCode\nbird_data_gdf[bird_data_gdf.species == 'Accipiter gentilis'].plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\n\n\nCode\naccgen_locs = bird_data_gdf[bird_data_gdf.species == 'Accipiter gentilis'].geometry\naccgen_presence = ela.annotate(accgen_locs, inp_layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\naccgen_layers = [fin_to_eng_layers[l] for l in accgen_fin_layers]\naccgen_layers\n\n\n['TJan',\n 'site_type_96m',\n 'agri_area_96m',\n 'urban_area_1km',\n 'urban_area_96m',\n 'water_area_96m',\n 'tree_age_96m',\n 'tree_diameter_96m',\n 'tree_volume_1km',\n 'tree_volume_96m']\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product', 'hinge'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                         n_hinge_features=10)\n\ntrain = ela.stack_geodataframes(accgen_presence, background, add_class_label=True)\n\nxtrain = train[accgen_layers]\nytrain = train['class']\naccgen_pred_layers = [datapath/f'{l}.tif' for l in accgen_layers]\nmaxent.fit(xtrain, ytrain)\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])\n\n\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.862\n\n\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=accgen_layers)\n\n\n\n\n\n\n\n\n\n\n\nCode\noutput = 'accgen_preds_nosplit_glmnet.tif'\n\nela.apply_model_to_rasters(maxent, accgen_pred_layers, output, quiet=False)\n\n\n\n\n\n\n\nCode\ncomp = '../maxent_results/ACCGEN_Full_data.asc'\nres = 'accgen_preds_nosplit_glmnet.tif'\n\n\nwith rio.open(comp) as src:\n    comp_vals = src.read(1)\nwith rio.open(res) as src:\n    res_vals = src.read(1)\n\n\n\n\nCode\ncomp_vals.shape, res_vals.shape\n\n\n((12420, 6180), (12420, 6180))\n\n\n\n\nCode\nmetrics.r2_score(comp_vals.flatten(), res_vals.flatten())\n\n\n0.9999999989227947\n\n\n\n\nCode\nmetrics.mean_absolute_error(comp_vals.flatten(), res_vals.flatten())\n\n\n0.09207188",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#buteo-buteo",
    "href": "birds.html#buteo-buteo",
    "title": "Using elapid library for species distribution modelling",
    "section": "Buteo buteo",
    "text": "Buteo buteo\n\n\nCode\nbird_data_gdf[bird_data_gdf.species == 'Buteo buteo'].plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\n\n\nCode\nbutbut_locs = bird_data_gdf[bird_data_gdf.species == 'Buteo buteo'].geometry\nbutbut_presence = ela.annotate(butbut_locs, inp_layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nbutbut_layers = [fin_to_eng_layers[l] for l in butbut_fin_layers]\nbutbut_layers\n\n\n['GDD5',\n 'agri_area_1km',\n 'urban_area_1km',\n 'urban_area_96m',\n 'water_area_1km',\n 'water_area_96m',\n 'tree_age_96m',\n 'site_type_1km',\n 'deci_tree_volume_96m',\n 'tree_height_96m',\n 'tree_volume_1km',\n 'tree_volume_96m']\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product', 'hinge'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                         n_hinge_features=10)\n\ntrain = ela.stack_geodataframes(butbut_presence, background, add_class_label=True)\n\nxtrain = train[butbut_layers]\nytrain = train['class']\nbutbut_pred_layers = [datapath/f'{l}.tif' for l in butbut_layers]\nmaxent.fit(xtrain, ytrain)\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])\n\n\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.847\n\n\n\n\nCode\noutput = 'butbut_preds_nosplit_glmnet.tif'\n\nela.apply_model_to_rasters(maxent, butbut_pred_layers, output, quiet=False)\n\n\n\n\n\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=butbut_layers)\n\n\n\n\n\n\n\n\n\n\n\nCode\ncomp = '../maxent_results/BUTBUT_Full_data.asc'\nres = 'butbut_preds_nosplit_glmnet.tif'\n\n\nwith rio.open(comp) as src:\n    comp_vals = src.read(1)\nwith rio.open(res) as src:\n    res_vals = src.read(1)\n\n\n\n\nCode\nmetrics.r2_score(comp_vals.flatten(), res_vals.flatten())\n\n\n0.9999999994989272\n\n\n\n\nCode\nmetrics.mean_absolute_error(comp_vals.flatten(), res_vals.flatten())\n\n\n0.05679366",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#dendrocopos-leucotos",
    "href": "birds.html#dendrocopos-leucotos",
    "title": "Using elapid library for species distribution modelling",
    "section": "Dendrocopos leucotos",
    "text": "Dendrocopos leucotos\n\n\nCode\nbird_data_gdf[bird_data_gdf.species == 'Dendrocopos leucotos'].plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\n\n\nCode\ndenleu_locs = bird_data_gdf[bird_data_gdf.species == 'Dendrocopos leucotos'].geometry\ndenleu_presence = ela.annotate(butbut_locs, inp_layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\ndenleu_layers = [fin_to_eng_layers[l] for l in denleu_fin_layers]\ndenleu_layers\n\n\n['shore_forest_500m',\n 'TJan',\n 'marshland_500m',\n 'site_type_96m',\n 'dominant_tree_species_96m',\n 'forest_peatland_500m',\n 'water_area_500m',\n 'tree_diameter_96m',\n 'site_type_500m',\n 'deci_tree_volume_96m',\n 'tree_height_96m',\n 'tree_volume_500m']\n\n\n\n\nCode\ndenleu_cat_idx = [4]\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product', 'hinge'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                         n_hinge_features=10)\n\ntrain = ela.stack_geodataframes(denleu_presence, background, add_class_label=True)\n\nxtrain = train[denleu_layers]\nytrain = train['class']\ndenleu_pred_layers = [datapath/f'{l}.tif' for l in denleu_layers]\nmaxent.fit(xtrain, ytrain, categorical=denleu_cat_idx)\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])\n\n\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.825\n\n\n\n\nCode\noutput = 'denleu_preds_nosplit_glmnet.tif'\n\nela.apply_model_to_rasters(maxent, denleu_pred_layers, output, quiet=False)\n\n\n\n\n\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=butbut_layers)\n\n\n\n\n\n\n\n\n\n\n\nCode\ncomp = '../maxent_results/DENLEU_Full_data.asc'\nres = 'denleu_preds_nosplit_glmnet.tif'\n\n\nwith rio.open(comp) as src:\n    comp_vals = src.read(1)\nwith rio.open(res) as src:\n    res_vals = src.read(1)\n\n\n\n\nCode\nmetrics.r2_score(comp_vals.flatten(), res_vals.flatten())\n\n\n0.9999999985785417\n\n\n\n\nCode\nmetrics.mean_absolute_error(comp_vals.flatten(), res_vals.flatten())\n\n\n0.080428004",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#pernis-apivorus",
    "href": "birds.html#pernis-apivorus",
    "title": "Using elapid library for species distribution modelling",
    "section": "Pernis apivorus",
    "text": "Pernis apivorus\n\n\nCode\nbird_data_gdf[bird_data_gdf.species == 'Pernis apivorus'].plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\n\n\nCode\nperapi_locs = bird_data_gdf[bird_data_gdf.species == 'Pernis apivorus'].geometry\nperapi_presence = ela.annotate(butbut_locs, inp_layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nperapi_layers = [fin_to_eng_layers[l] for l in perapi_fin_layers]\nperapi_layers\n\n\n['GDD5',\n 'site_type_96m',\n 'dominant_tree_species_96m',\n 'agri_area_1km',\n 'urban_area_96m',\n 'site_type_1km',\n 'deci_tree_volume_96m',\n 'tree_height_96m',\n 'tree_volume_96m']\n\n\n\n\nCode\nperapi_cat_idx = [2]\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product', 'hinge'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                         n_hinge_features=10)\n\ntrain = ela.stack_geodataframes(perapi_presence, background, add_class_label=True)\n\nxtrain = train[perapi_layers]\nytrain = train['class']\nperapi_pred_layers = [datapath/f'{l}.tif' for l in perapi_layers]\nmaxent.fit(xtrain, ytrain, categorical=perapi_cat_idx)\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])\n\n\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.816\n\n\n\n\nCode\noutput = 'perapi_preds_nosplit_glmnet.tif'\n\nela.apply_model_to_rasters(maxent, perapi_pred_layers, output, quiet=False)\n\n\n\n\n\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=butbut_layers)\n\n\n\n\n\n\n\n\n\n\n\nCode\ncomp = '../maxent_results/PERAPI_Full_data_NEW.asc'\nres = 'perapi_preds_nosplit_glmnet.tif'\n\n\nwith rio.open(comp) as src:\n    comp_vals = src.read(1)\nwith rio.open(res) as src:\n    res_vals = src.read(1)\n\n\n\n\nCode\nmetrics.r2_score(comp_vals.flatten(), res_vals.flatten())\n\n\n0.9999999995853329\n\n\n\n\nCode\nmetrics.mean_absolute_error(comp_vals.flatten(), res_vals.flatten())\n\n\n0.044652212",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  },
  {
    "objectID": "birds.html#picoide-tridactylus",
    "href": "birds.html#picoide-tridactylus",
    "title": "Using elapid library for species distribution modelling",
    "section": "Picoide tridactylus",
    "text": "Picoide tridactylus\n\n\nCode\nbird_data_gdf[bird_data_gdf.species == 'Picoide tridactylus'].plot(markersize=0.5)\n\n\n\n\n\n\n\n\n\n\n\nCode\npictri_locs = bird_data_gdf[bird_data_gdf.species == 'Picoide tridactylus'].geometry\npictri_presence = ela.annotate(butbut_locs, inp_layers, labels=labels, drop_na=True)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\npictri_layers = [fin_to_eng_layers[l] for l in pictri_fin_layers]\npictri_layers\n\n\n['TJan',\n 'site_type_96m',\n 'dominant_tree_species_96m',\n 'agri_area_96m',\n 'urban_area_500m',\n 'water_area_500m',\n 'tree_age_96m',\n 'site_type_500m',\n 'tree_height_96m',\n 'tree_volume_500m',\n 'tree_volume_96m']\n\n\n\n\nCode\npictri_cat_idx = [2]\n\n\n\n\nCode\nmaxent = ela.MaxentModel(transform='cloglog', \n                         beta_lqp=0.05, \n                         beta_hinge=0.5,\n                         beta_categorical=0.25,\n                         beta_threshold=1.0,\n                         feature_types=['linear', 'product', 'hinge'],\n                         use_lambdas='best',\n                         beta_multiplier=1.5,\n                         n_hinge_features=10)\n\ntrain = ela.stack_geodataframes(pictri_presence, background, add_class_label=True)\n\nxtrain = train[pictri_layers]\nytrain = train['class']\n\npictri_pred_layers = [datapath/f'{l}.tif' for l in pictri_layers]\nmaxent.fit(xtrain, ytrain, categorical=pictri_cat_idx)\n\n\nMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.MaxentModelMaxentModel(beta_categorical=0.25, beta_hinge=0.5, beta_lqp=0.05,\n            feature_types=['linear', 'product', 'hinge'])\n\n\n\n\nCode\nypred = maxent.predict(xtrain)\nauc = metrics.roc_auc_score(ytrain, ypred)\nprint(f\"Training AUC score: {auc:0.3f}\")\n\n\nTraining AUC score: 0.844\n\n\n\n\nCode\noutput = 'pictri_preds_nosplit_glmnet.tif'\n\nela.apply_model_to_rasters(maxent, pictri_pred_layers, output, quiet=False)\n\n\n\n\n\n\n\nCode\nfig, ax = maxent.permutation_importance_plot(x=xtrain, y=ytrain, labels=pictri_layers)\n\n\n\n\n\n\n\n\n\n\n\nCode\ncomp = '../maxent_results/PICTRI_Full_data.asc'\nres = 'pictri_preds_nosplit_glmnet.tif'\n\nwith rio.open(comp) as src:\n    comp_vals = src.read(1)\nwith rio.open(res) as src:\n    res_vals = src.read(1)\n\n\n\n\nCode\nmetrics.r2_score(comp_vals.flatten(), res_vals.flatten())\n\n\n0.9999999994508276\n\n\n\n\nCode\nmetrics.mean_absolute_error(comp_vals.flatten(), res_vals.flatten())\n\n\n0.0443944",
    "crumbs": [
      "Using elapid library for species distribution modelling"
    ]
  }
]